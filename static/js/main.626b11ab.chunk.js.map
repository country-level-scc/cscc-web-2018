{"version":3,"sources":["csv-loader.js","country-picker.js","constants.js","SccFig1.js","param-picker.js","SccFig2.js","SccFig4.js","App.js","index.js"],"names":["CSVLoader","state","data","loading","fetchData","setState","props","onChange","Papa","parse","csvPath","download","header","dynamicTyping","step","results","parser","row","test","push","complete","getData","this","prevProps","children","React","defaultProps","process","name","includes","CountryNamePicker","inputValue","focused","handleKeyPress","countryList","evt","focusClamp","num","clamp","length","key","dropdownOpen","selectedCountry","scrollIntoViewIfNeeded","preventDefault","label","country","possibleRow","countries","find","id","filteredCountries","trim","matchSorter","keys","className","onMouseDownCapture","type","value","currentTarget","onFocus","onClick","onBlur","placeholder","onKeyDown","ref","el","scrollParent","map","idx","SSPS","RCPS","DMGS","dataForParams","ssp","rcp","filter","SSP","RCP","reduce","prev","curr","run","Scales","minX","maxX","scaler","height","slices","sliceWidth","Math","floor","ticks","_range","ceil","sort","a","b","x1","x2","y1","y2","stroke","t","defaultStyle","x","style","spring","values","y","textAnchor","Number","toLocaleString","SCCFigure","width","paddingY","min","max","forEach","d","minMax","inferred","slice","inferredClamp","maxActual","undefined","scaleLinear","domain","range","rowHeight","rowOffest","viewBox","i","startY","transform","fontSize","sspLabels","SSP1","SSP2","dy","SSP3","SSP4","SSP5","DamageGroup","rcpRowHeight","j","join","strokeWidth","DamageFigure","damage_functions","dmg_height","fn","median","cx","cy","r","Fig1Options","onCountryChange","fixedDiscounting","prtp","ParameterPicker","update","params","dmg","discounting","callback","projection","geoNaturalEarth1","scale","translate","worldMap","feature","objects","features","Figure2","properties","countryRow","ISO3","onCountryEnter","bins","fig2Bins","labels","0","7","geoPath","fill","colorFor","onMouseEnter","cursor","onCountryClick","index","binner","schemeRdYlBu","val","invert","indices","pos","indexOf","Fig2Legend","size","bin","Fig2Options","hoverCountry","hoveredName","hoveredData","onParamChange","growthAdjustedDiscounting","onCountrySelect","borderTop","borderBottom","fmt","dmgfuncpar","climate","trunc","Fig4DataLoader","csccData","csccLoading","wbData","wbLoading","dataToRender","dataForIso3","iso3","euCountries","worldCsccData","wbEu","csccEu","euCo2eShare","acc","euPop","euGdp","euSccLow","euSccMid","euSccHigh","sccPerCapita","logGdp","log10","gdp","shareEmissions","shareScc","population","totalCscc","worldBankData","countriesToPlot","euData","getEuData","allData","getAllData","prevState","countryData","col","CsccFig4","domainX","initialDomainY","domainY","padding","gdps","gdpDomain","scaleR","scaleLog","scaleX","shareSccs","scaleY","color","scaleDiverging","interpolateRdBu","safe","isNaN","xmlns","xAxis","yAxis","clip","gdpRadius","capita","textY","title","radius","labelCountries","pointerEvents","Fig4Axes","slopes","SlopeLines","m","yInt","xInt","Fig4Legend","gradientId","uniqueId","colorInterpolate","gradientTransform","offset","stopColor","SccTable","toPrecision","App","page","handleHashChange","hashParse","window","location","hash","path","query","nav","pathStr","queryObj","currentQuery","querystring","queryEncode","updateNavState","split","pair","kv","decodeURIComponent","obj","Object","encodeURIComponent","startsWith","substring","queryParse","addEventListener","Fragment","display","flex","position","marginBottom","bigFig4","console","log","fig4Data","marginRight","flexFlow","marginTop","marginLeft","alignItems","toFixed","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.626b11ab.chunk.js","sourcesContent":["// @flow\n\nimport * as React from 'react'\nimport Papa from 'papaparse'\n\ntype CSVLoaderProps<Row> = {\n  test: (row: Row) => boolean,\n  dynamicTyping: (columnName: string) => boolean,\n  csvPath: string,\n  onChange?: (state: CSVLoaderState<*>) => any,\n  children: ({data: Array<Row>, loading: boolean}) => React.Node\n};\n\ntype CSVLoaderState<Out> = {\n  data: Array<Out>,\n  loading: boolean\n};\n\nclass CSVLoader<Row, Out> extends React.PureComponent<\n  CSVLoaderProps<Row>,\n  CSVLoaderState<Out>\n> {\n  state = {\n    data: [],\n    loading: false\n  };\n\n  static defaultProps = {\n    csvPath: `${process.env.PUBLIC_URL || ''}/cscc_v1.csv`,\n    dynamicTyping: (name: string) => [\"16.7%\", \"50%\", \"83.3%\"].includes(name),\n    test: (row: Row) => true,\n    onChange: () => {},\n  };\n\n  fetchData = () => {\n    const data = [];\n    this.setState ({ loading: true }, () => this.props.onChange(this.state));\n    Papa.parse(this.props.csvPath, {\n      download: true,\n      header: true,\n      dynamicTyping: this.props.dynamicTyping,\n      step: (results, parser) => {\n        const row = results.data[0];\n        if (this.props.test(row)) {\n          data.push(row);\n        }\n      },\n      complete: () => {\n        this.setState({ data, loading: false }, () => this.props.onChange(this.state));\n      }\n    });\n  };\n\n  getData = () => {\n    const {data, loading} = this.state;\n    return {data, loading};\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.csvPath !== this.props.csvPath) {\n      this.fetchData();\n    }\n    if (prevProps.test !== this.props.test) {\n      this.fetchData();\n    }\n  }\n\n  render() {\n    const { data, loading } = this.state;\n\n    return this.props.children ? this.props.children({ data, loading }) : null;\n  }\n}\n\nexport default CSVLoader;\n","// @flow\nimport * as React from 'react';\nimport matchSorter from 'match-sorter';\nimport clamp from 'lodash/clamp';\n\nexport class CountryNamePicker extends React.Component<> {\n  static defaultProps = {\n    country: 'WLD',\n  }\n  state = {\n    inputValue: '',\n    focused: -2,\n  };\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.country !== this.props.country) {\n      const possibleRow = countries.find(row => row.id === this.props.country);\n      if (possibleRow) {\n        this.setState({\n          // country: possibleRow.id,\n          inputValue: possibleRow.label,\n        })\n      }\n    }\n  }\n\n  componentDidMount() {\n    const {country} = this.props;\n    const possibleRow = countries.find(row => row.id === country);\n    if (possibleRow) {\n      this.setState({\n        inputValue: possibleRow.label,\n      })\n    }\n  }\n\n  render() {\n    const filteredCountries =\n      this.state.inputValue.trim() === ''\n        ? countries\n        : matchSorter(countries, this.state.inputValue, {keys: ['label']});\n    return (\n      <div\n        className=\"country-picker\"\n        onMouseDownCapture={evt => {\n          if (this.state.dropdownOpen) evt.preventDefault();\n        }}\n      >\n        <input\n          type=\"text\"\n          className=\"country-picker-input\"\n          value={this.state.inputValue}\n          onChange={evt => this.setState({inputValue: evt.currentTarget.value})}\n          onFocus={() => {\n            this.setState({dropdownOpen: true});\n          }}\n          onClick={() => this.setState({dropdownOpen: true, focused: 0})}\n          onBlur={() => {\n            this.setState({dropdownOpen: false, focused: -1});\n          }}\n          placeholder=\"Pick a country\"\n          onKeyDown={this.handleKeyPress(filteredCountries)}\n        />\n        {this.state.dropdownOpen && (\n          <div\n            className=\"country-picker-countries\"\n            ref={el => (this.scrollParent = el)}\n          >\n            {filteredCountries.map(({id, label}, idx) => (\n              <div\n                className={\n                  idx === this.state.focused\n                    ? 'country-picker-country country-picker-country-selected'\n                    : 'country-picker-country'\n                }\n                ref={el => {\n                  if (idx === this.state.focused) {\n                    this.selectedCountry = el;\n                  }\n                }}\n                key={id}\n                onClick={() => {\n                  if (this.props.onChange) {\n                    this.props.onChange({id, label});\n                  }\n                  this.setState({\n                    inputValue: label,\n                    dropdownOpen: false,\n                    focused: -1,\n                  });\n                }}\n              >\n                {label}\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  }\n  handleKeyPress = countryList => evt => {\n    const focusClamp = num => clamp(num, 0, countryList.length);\n    switch (evt.key) {\n      case 'ArrowDown':\n        this.setState(\n          ({focused}) => ({\n            focused: focusClamp(focused + 1),\n            dropdownOpen: true,\n          }),\n          () => {\n            this.selectedCountry &&\n              this.selectedCountry.scrollIntoViewIfNeeded();\n          },\n        );\n        evt.preventDefault();\n        return;\n      case 'ArrowUp':\n        this.setState(\n          ({focused}) => {\n            if (focused === 0) {\n              return {dropdownOpen: false, focused: -1};\n            } else {\n              return {focused: focusClamp(focused - 1)};\n            }\n          },\n          () => {\n            this.selectedCountry &&\n              this.selectedCountry.scrollIntoViewIfNeeded();\n          },\n        );\n        evt.preventDefault();\n        return;\n      case 'Enter':\n        this.setState({\n          inputValue: countryList[focusClamp(this.state.focused)].label,\n          // country: countryList[focusClamp(this.state.focused)].id,\n          focused: 0,\n          dropdownOpen: false,\n        });\n        this.props.onChange &&\n          this.props.onChange(countryList[focusClamp(this.state.focused)]);\n        return;\n      case 'Escape':\n        this.setState({dropdownOpen: false});\n        return;\n      default:\n        return this.setState({dropdownOpen: true, focused: -1});\n    }\n  };\n}\n\nconst countries = [\n  {id: 'WLD', label: 'World'},\n  {id: 'AFG', label: 'Afghanistan'},\n  {id: 'ALB', label: 'Albania'},\n  {id: 'DZA', label: 'Algeria'},\n  {id: 'AGO', label: 'Angola'},\n  {id: 'ARG', label: 'Argentina'},\n  {id: 'ARM', label: 'Armenia'},\n  {id: 'AUS', label: 'Australia'},\n  {id: 'AUT', label: 'Austria'},\n  {id: 'AZE', label: 'Azerbaijan'},\n  {id: 'BHS', label: 'Bahamas'},\n  {id: 'BGD', label: 'Bangladesh'},\n  {id: 'BLR', label: 'Belarus'},\n  {id: 'BEL', label: 'Belgium'},\n  {id: 'BLZ', label: 'Belize'},\n  {id: 'BEN', label: 'Benin'},\n  {id: 'BTN', label: 'Bhutan'},\n  {id: 'BOL', label: 'Bolivia'},\n  {id: 'BIH', label: 'Bosnia and Herz.'},\n  {id: 'BWA', label: 'Botswana'},\n  {id: 'BRA', label: 'Brazil'},\n  {id: 'BRN', label: 'Brunei'},\n  {id: 'BGR', label: 'Bulgaria'},\n  {id: 'BFA', label: 'Burkina Faso'},\n  {id: 'BDI', label: 'Burundi'},\n  {id: 'KHM', label: 'Cambodia'},\n  {id: 'CMR', label: 'Cameroon'},\n  {id: 'CAN', label: 'Canada'},\n  {id: 'CAF', label: 'Central African Rep.'},\n  {id: 'TCD', label: 'Chad'},\n  {id: 'CHL', label: 'Chile'},\n  {id: 'CHN', label: 'China'},\n  {id: 'COL', label: 'Colombia'},\n  {id: 'COG', label: 'Congo'},\n  {id: 'CRI', label: 'Costa Rica'},\n  {id: 'CIV', label: \"CÃ³te d'Ivoire\"},\n  {id: 'HRV', label: 'Croatia'},\n  {id: 'CUB', label: 'Cuba'},\n  {id: 'CZE', label: 'Czechia'},\n  {id: 'COD', label: 'Dem. Rep. Congo'},\n  {id: 'DNK', label: 'Denmark'},\n  {id: 'DJI', label: 'Djibouti'},\n  {id: 'DOM', label: 'Dominican Rep.'},\n  {id: 'ECU', label: 'Ecuador'},\n  {id: 'EGY', label: 'Egypt'},\n  {id: 'SLV', label: 'El Salvador'},\n  {id: 'GNQ', label: 'Eq. Guinea'},\n  {id: 'ERI', label: 'Eritrea'},\n  {id: 'EST', label: 'Estonia'},\n  {id: 'SWZ', label: 'eSwatini'},\n  {id: 'ETH', label: 'Ethiopia'},\n  {id: 'FJI', label: 'Fiji'},\n  {id: 'FIN', label: 'Finland'},\n  {id: 'FRA', label: 'France'},\n  {id: 'GAB', label: 'Gabon'},\n  {id: 'GMB', label: 'Gambia'},\n  {id: 'GEO', label: 'Georgia'},\n  {id: 'DEU', label: 'Germany'},\n  {id: 'GHA', label: 'Ghana'},\n  {id: 'GRC', label: 'Greece'},\n  {id: 'GTM', label: 'Guatemala'},\n  {id: 'GIN', label: 'Guinea'},\n  {id: 'GNB', label: 'Guinea-Bissau'},\n  {id: 'GUY', label: 'Guyana'},\n  {id: 'HTI', label: 'Haiti'},\n  {id: 'HND', label: 'Honduras'},\n  {id: 'HUN', label: 'Hungary'},\n  {id: 'ISL', label: 'Iceland'},\n  {id: 'IND', label: 'India'},\n  {id: 'IDN', label: 'Indonesia'},\n  {id: 'IRN', label: 'Iran'},\n  {id: 'IRQ', label: 'Iraq'},\n  {id: 'IRL', label: 'Ireland'},\n  {id: 'ISR', label: 'Israel'},\n  {id: 'ITA', label: 'Italy'},\n  {id: 'JAM', label: 'Jamaica'},\n  {id: 'JPN', label: 'Japan'},\n  {id: 'JOR', label: 'Jordan'},\n  {id: 'KAZ', label: 'Kazakhstan'},\n  {id: 'KEN', label: 'Kenya'},\n  {id: 'KWT', label: 'Kuwait'},\n  {id: 'KGZ', label: 'Kyrgyzstan'},\n  {id: 'LAO', label: 'Laos'},\n  {id: 'LVA', label: 'Latvia'},\n  {id: 'LBN', label: 'Lebanon'},\n  {id: 'LSO', label: 'Lesotho'},\n  {id: 'LBR', label: 'Liberia'},\n  {id: 'LBY', label: 'Libya'},\n  {id: 'LTU', label: 'Lithuania'},\n  {id: 'LUX', label: 'Luxembourg'},\n  {id: 'MKD', label: 'Macedonia'},\n  {id: 'MDG', label: 'Madagascar'},\n  {id: 'MWI', label: 'Malawi'},\n  {id: 'MYS', label: 'Malaysia'},\n  {id: 'MLI', label: 'Mali'},\n  {id: 'MRT', label: 'Mauritania'},\n  {id: 'MEX', label: 'Mexico'},\n  {id: 'MDA', label: 'Moldova'},\n  {id: 'MNG', label: 'Mongolia'},\n  {id: 'MNE', label: 'Montenegro'},\n  {id: 'MAR', label: 'Morocco'},\n  {id: 'MOZ', label: 'Mozambique'},\n  {id: 'MMR', label: 'Myanmar'},\n  {id: 'CYP', label: 'N. Cyprus'},\n  {id: 'NAM', label: 'Namibia'},\n  {id: 'NPL', label: 'Nepal'},\n  {id: 'NLD', label: 'Netherlands'},\n  {id: 'NCL', label: 'New Caledonia'},\n  {id: 'NZL', label: 'New Zealand'},\n  {id: 'NIC', label: 'Nicaragua'},\n  {id: 'NER', label: 'Niger'},\n  {id: 'NGA', label: 'Nigeria'},\n  {id: 'NOR', label: 'Norway'},\n  {id: 'OMN', label: 'Oman'},\n  {id: 'PAK', label: 'Pakistan'},\n  {id: 'PAN', label: 'Panama'},\n  {id: 'PNG', label: 'Papua New Guinea'},\n  {id: 'PRY', label: 'Paraguay'},\n  {id: 'PER', label: 'Peru'},\n  {id: 'PHL', label: 'Philippines'},\n  {id: 'POL', label: 'Poland'},\n  {id: 'PRT', label: 'Portugal'},\n  {id: 'QAT', label: 'Qatar'},\n  {id: 'ROU', label: 'Romania'},\n  {id: 'RUS', label: 'Russia'},\n  {id: 'RWA', label: 'Rwanda'},\n  {id: 'SAU', label: 'Saudi Arabia'},\n  {id: 'SEN', label: 'Senegal'},\n  {id: 'SRB', label: 'Serbia'},\n  {id: 'SLE', label: 'Sierra Leone'},\n  {id: 'SVK', label: 'Slovakia'},\n  {id: 'SVN', label: 'Slovenia'},\n  {id: 'SLB', label: 'Solomon Is.'},\n  {id: 'SOM', label: 'Somalia'},\n  {id: 'ZAF', label: 'South Africa'},\n  {id: 'KOR', label: 'South Korea'},\n  {id: 'ESP', label: 'Spain'},\n  {id: 'LKA', label: 'Sri Lanka'},\n  {id: 'SDN', label: 'Sudan'},\n  {id: 'SUR', label: 'Suriname'},\n  {id: 'SWE', label: 'Sweden'},\n  {id: 'CHE', label: 'Switzerland'},\n  {id: 'SYR', label: 'Syria'},\n  {id: 'TJK', label: 'Tajikistan'},\n  {id: 'TZA', label: 'Tanzania'},\n  {id: 'THA', label: 'Thailand'},\n  {id: 'TGO', label: 'Togo'},\n  {id: 'TTO', label: 'Trinidad and Tobago'},\n  {id: 'TUN', label: 'Tunisia'},\n  {id: 'TUR', label: 'Turkey'},\n  {id: 'TKM', label: 'Turkmenistan'},\n  {id: 'UGA', label: 'Uganda'},\n  {id: 'UKR', label: 'Ukraine'},\n  {id: 'ARE', label: 'United Arab Emirates'},\n  {id: 'GBR', label: 'United Kingdom'},\n  {id: 'USA', label: 'United States of America'},\n  {id: 'URY', label: 'Uruguay'},\n  {id: 'UZB', label: 'Uzbekistan'},\n  {id: 'VUT', label: 'Vanuatu'},\n  {id: 'VEN', label: 'Venezuela'},\n  {id: 'VNM', label: 'Vietnam'},\n  {id: 'YEM', label: 'Yemen'},\n  {id: 'ZMB', label: 'Zambia'},\n  {id: 'ZWE', label: 'Zimbabwe'},\n];\n","// @flow\n\nexport const SSPS = [\n  { value: \"SSP1\", label: \"Sustainability\" },\n  { value: \"SSP2\", label: \"Middle of the Road\" },\n  { value: \"SSP3\", label: \"Regional Rivalry\" },\n  { value: \"SSP4\", label: \"Inequality\" },\n  { value: \"SSP5\", label: \"Fossil-fueled Development\" }\n];\nexport const RCPS = [\n  { value: \"rcp45\", label: \"RCP 4.5\" },\n  { value: \"rcp60\", label: \"RCP 6\" },\n  { value: \"rcp85\", label: \"RCP 8.5\" }\n];\nexport const DMGS = [\n  { value: \"bhm_sr\", label: \"bhm short run\" },\n  { value: \"bhm_richpoor_sr\", label: \"bhm rich/poor short run\" },\n  { value: \"bhm_lr\", label: \"bhm long run\" },\n  { value: \"bhm_richpoor_lr\", label: \"bhm rich/poor long run\" },\n  // { value: \"djo\", label: \"DJO\" }\n];\n","// @flow\nimport * as React from 'react';\nimport {scaleLinear} from 'd3-scale';\nimport _range from 'lodash/range';\nimport {Motion, spring} from 'react-motion';\nimport CSVLoader from './csv-loader';\nimport {CountryNamePicker} from './country-picker';\n\nimport {SSPS, RCPS} from './constants';\n\ntype SSP = 'SSP1' | 'SSP2' | 'SSP3' | 'SSP4' | 'SSP5';\ntype RCP = 'rcp45' | 'rcp60' | 'rcp85';\ntype DMG = 'bhm_sr' | 'bhm_richpoor_sr' | 'bhm_lr' | 'bhm_richpoor_lr' | 'djo';\ntype CSVRow = {|\n  run: DMG,\n  dmgfuncpar: string,\n  climate: 'expected' | 'uncertain',\n  SSP: SSP,\n  RCP: RCP,\n  N: *,\n  ISO3: string,\n  prtp: '1p5',\n  eta: '2',\n  dr: 'NA' | '3',\n  '16.7%': number,\n  '50%': number,\n  '83.3%': number,\n|};\n\nconst dataForParams = (data: Array<CSVRow>, ssp: SSP, rcp: RCP) =>\n  data\n    .filter(row => row.SSP === ssp)\n    .filter(row => row.RCP === rcp)\n    .reduce(\n      (prev, curr) => ({\n        ...prev,\n        [curr.run]: curr,\n      }),\n      {},\n    );\n\nconst Scales = ({minX, maxX, scaler, height, slices = 5}) => {\n  const sliceWidth = Math.floor((maxX - minX) / slices);\n  let ticks = _range(Math.floor(minX), Math.ceil(maxX), sliceWidth);\n\n  if (Math.floor(minX) < 0) {\n    ticks.push(0)\n    ticks = ticks.sort((a, b) => a-b)\n  }\n  return (\n    <g>\n      <line x1={1} x2={1} y1={0} y2={height} stroke=\"#aaa\" />\n      <line y1={height} y2={height} stroke=\"#aaa\" x1={1} x2={scaler(maxX)} />\n      {ticks.map((t, idx) => (\n        <Motion key={idx} defaultStyle={{x: 0}} style={{x: spring(scaler(t))}}>\n          {values => (\n            <React.Fragment>\n              <line\n                x1={values.x}\n                x2={values.x}\n                y1={t === 0 ? 0 : height - 3}\n                y2={height}\n                stroke=\"#aaa\"\n              />\n              {t !== 0 && <text\n                className=\"tickLabel\"\n                x={values.x}\n                y={height + 10}\n                textAnchor=\"middle\"\n              >\n                {Number(t).toLocaleString()}\n              </text>}\n            </React.Fragment>\n          )}\n        </Motion>\n      ))}\n    </g>\n  );\n};\n\nconst minMax = (data: Array<CSVRow>): {max: number, min: number} => {\n  let min = 0,\n    max = 0;\n  data.forEach(row => {\n    const d = [row['16.7%'], row['83.3%']];\n    min = min ? Math.min(min, ...d) : Math.min(...d);\n    max = max ? Math.max(max, ...d) : Math.max(...d);\n  });\n  return {min, max};\n};\n\nconst inferredClamp = (data: Array<CSVRow>) => {\n  const slice = data\n    .filter(row => row.RCP === 'rcp60')\n    .filter(row => row.SSP === 'SSP2')\n    .filter(row => row.run === 'bhm_sr');\n  if (slice.length === 1) {\n    return (slice[0]['83.3%'] - slice[0]['16.7%']) * 20;\n  } else {\n    // return 10k as default if this fails (which should error out)\n    // console.log(`unable to find a max bounds for ${data[0] && data[0].ISO3}`);\n    return 10000;\n  }\n};\n\ntype Fig1Props = {\n  country: string,\n  data: *,\n  clamp?: number,\n};\n\nclass SCCFigure extends React.Component<Fig1Props> {\n  static defaultProps = {\n    width: 400,\n    height: 300,\n  };\n  render() {\n    const {country, data, clamp, width, height, paddingY = 35} = this.props;\n    const {min, max} = minMax(data);\n    const inferred = inferredClamp(data);\n    const maxActual = clamp !== undefined ? clamp : Math.min(inferred, max);\n\n    const paddingLeft = 200;\n    const scaler = scaleLinear()\n      .clamp(true) // clamp b/c values may be negative\n      .domain([min, maxActual])\n      .range([10, width - paddingLeft - 5]);\n\n    const rowHeight = (height - (SSPS.length - 1) * paddingY) / SSPS.length;\n    const rowOffest = rowHeight + paddingY;\n\n    return (\n      <svg\n        viewBox={`-${paddingLeft} -5 ${width + 100} ${height + 30}`}\n        width={width}\n        height={height}\n      >\n        {SSPS.map(({value: ssp}, i) => {\n          const startY = i * rowOffest + 5;\n          return (\n            <g key={ssp} transform={`translate(0,${startY})`}>\n              <DamageGroup\n                ssp={ssp}\n                data={data}\n                scaler={scaler}\n                height={rowHeight}\n              />\n              <text\n                className=\"fig1-major-y-label\"\n                y={rowHeight / 2 - 9}\n                x={-50}\n                textAnchor=\"end\"\n                style={{fontSize: 14, width: 40}}\n              >\n                {sspLabels[ssp]}\n              </text>\n            </g>\n          );\n        })}\n        <Scales minX={min} maxX={maxActual} height={height} scaler={scaler} />\n\n        <text\n          className=\"fig1-attr\"\n          x={width - paddingLeft}\n          y={height + 40}\n          textAnchor=\"end\"\n        >\n          Ricke et al. Country-level social cost of carbon. (2018).\n        </text>\n      </svg>\n    );\n  }\n}\n\nconst sspLabels = {\n  SSP1: 'Sustainability',\n  SSP2: (\n    <React.Fragment>\n      <tspan textAnchor=\"end\" x={-50} y=\"1em\">\n        Middle\n      </tspan>\n      <tspan textAnchor=\"end\" x={-50} dy=\"1.3em\">\n        of the\n      </tspan>\n      <tspan textAnchor=\"end\" x={-50} dy=\"1.3em\">\n        Road\n      </tspan>\n    </React.Fragment>\n  ),\n  SSP3: (\n    <React.Fragment>\n      <tspan textAnchor=\"end\" x={-50}>\n        Regional\n      </tspan>\n      <tspan textAnchor=\"end\" x={-50} dy=\"1.3em\">\n        Rivalry\n      </tspan>\n    </React.Fragment>\n  ),\n  SSP4: 'Inequality',\n  SSP5: (\n    <React.Fragment>\n      <tspan textAnchor=\"end\" x={-50}>\n        Fossil-fueled\n      </tspan>\n      <tspan textAnchor=\"end\" x={-50} dy=\"1.3em\">\n        Development\n      </tspan>\n    </React.Fragment>\n  ),\n};\n\nexport default SCCFigure;\n\nconst DamageGroup = ({ssp, data, scaler, height}) => {\n  const rcpRowHeight = height / RCPS.length;\n  return RCPS.map(({value: rcp, label}, j) => (\n    <g\n      key={rcp}\n      transform={`translate(0,${j * rcpRowHeight})`}\n      // onMouseEnter={() => console.log({ rcp, ssp })}\n      className={[rcp, ssp, 'scc'].join(' ')}\n    >\n      <DamageFigure\n        rcp={rcp}\n        ssp={ssp}\n        data={dataForParams(data, ssp, rcp)}\n        scaler={scaler}\n        height={rcpRowHeight}\n      />\n      <text x={-2} y={4} textAnchor=\"end\" strokeWidth={0} className=\"rcpLabel\">\n        {label}\n      </text>\n      <line x1={1} y1={2} x2={4} y2={2} strokeWidth={1} stroke=\"#aaa\" />\n    </g>\n  ));\n};\n\ntype Props = {\n  rcp: string,\n  ssp: string,\n  data: {[key: DMG]: CSVRow},\n  scaler: (x: number) => number,\n};\nclass DamageFigure extends React.Component<Props> {\n  render() {\n    const {rcp, data, ssp, scaler, height} = this.props;\n    const damage_functions = [\n      'bhm_sr',\n      'bhm_richpoor_sr',\n      'bhm_lr',\n      'bhm_richpoor_lr',\n      'djo',\n    ];\n\n    const dmg_height = height / damage_functions.length;\n\n    return damage_functions.map((fn, idx) => {\n      const row = data[fn] || {'16.7%': 0, '83.3%': 0, '50%': 0};\n\n      const x1 = scaler(row['16.7%']);\n      const x2 = scaler(row['83.3%']);\n\n      const median = scaler(row['50%']);\n\n      return (\n        <React.Fragment key={fn}>\n          <Motion\n            defaultStyle={{x1: 0, x2: 0, median: 0}}\n            style={{x1: spring(x1), x2: spring(x2), median: spring(median)}}\n          >\n            {value => (\n              <React.Fragment>\n                <line\n                  className={fn}\n                  x1={value.x1}\n                  x2={value.x2}\n                  y1={idx * dmg_height}\n                  y2={idx * dmg_height}\n                />\n\n                {x1 - x2 !== 0 && (\n                  <circle\n                    cx={value.median || 0}\n                    cy={idx * dmg_height}\n                    r={1}\n                    className={fn}\n                  />\n                )}\n              </React.Fragment>\n            )}\n          </Motion>\n        </React.Fragment>\n      );\n    });\n  }\n}\n\ntype F1Props = {\n  country: string,\n  onCountryChange: (country: string) => any,\n  width: number,\n  height: number,\n};\ntype F1State = {};\nexport class Fig1Options extends React.Component<F1Props, F1State> {\n  render() {\n    const {country, width, height} = this.props;\n    return (\n      <div>\n        <div className=\"fig1-picker-row\">\n          <CountryNamePicker country={country} onChange={({id}) => this.props.onCountryChange(id)}/>\n          <button onClick={() => this.props.onCountryChange('WLD')}>\n            reset to world\n          </button>\n        </div>\n        <CSVLoader\n          test={this.fixedDiscounting}\n          csvPath={`${process.env.PUBLIC_URL || ''}/iso3_${country}.csv`}\n        >\n          {({data, loading}) => (\n            <SCCFigure\n              width={width}\n              height={height}\n              data={data}\n              country={country}\n            />\n          )}\n        </CSVLoader>\n      </div>\n    );\n  }\n  fixedDiscounting(row) {\n    return row.prtp === '2';\n  }\n}\n","// @flow\n\nimport * as React from 'react';\nimport {SSPS, DMGS, RCPS} from './constants';\n\ntype ParamProps = {\n  children: ({state: ParamState}) => React.Node,\n  onChange: ({state: ParamState}) => any,\n  params: {\n    ssp: string,\n    rcp: string,\n    dmg: string,\n    discounting: string,\n  },\n};\n\nexport default class ParameterPicker extends React.Component<ParamProps> {\n  static defaultProps = {\n    params: {\n      ssp: 'SSP2',\n      rcp: 'rcp60',\n      dmg: 'bhm_sr',\n      discounting: 'growth adjusted',\n    },\n    callback: () => {},\n  };\n\n  update = evt => {\n    this.props.onChange({state: {\n      ...this.props.params,\n      [evt.currentTarget.name]: evt.currentTarget.value,\n    }});\n  };\n\n  render() {\n    return (\n      <div>\n        <div className=\"param-picker\">\n          <div className=\"param-picker-row\">\n            <select\n              name=\"ssp\"\n              value={this.props.params.ssp}\n              onChange={this.update}\n            >\n              {SSPS.map(ssp => (\n                <option key={ssp.value} value={ssp.value}>\n                  {ssp.label}\n                </option>\n              ))}\n            </select>\n            <select\n              name=\"rcp\"\n              value={this.props.params.rcp}\n              onChange={this.update}\n            >\n              {RCPS.map(ssp => (\n                <option key={ssp.value} value={ssp.value}>\n                  {ssp.label}\n                </option>\n              ))}\n            </select>\n            <select\n              name=\"dmg\"\n              value={this.props.params.dmg}\n              onChange={this.update}\n            >\n              {DMGS.map(ssp => (\n                <option key={ssp.value} value={ssp.value}>\n                  {ssp.label}\n                </option>\n              ))}\n            </select>\n            <select\n              name=\"discounting\"\n              value={this.props.params.discounting}\n              onChange={this.update}\n            >\n              {['fixed', 'growth adjusted'].map(d => (\n                <option key={d} value={d}>\n                  {d}\n                </option>\n              ))}\n            </select>\n          </div>\n          <div className=\"param-picker-descs\">\n            <div>\n              Socioeconomic Scenario <br />\n              Shared Socioeconomic Pathway (SSPs)\n            </div>\n            <div>\n              Emissions Scenario<br />\n              Representative Concentration Pathway (RCPs)\n            </div>\n            <div>Damage Model</div>\n            <div>\n              Discounting Scheme<br />{' '}\n              {this.props.params.discounting === 'fixed' && (\n                <React.Fragment>\n                  Pure rate of time preference of 2% per year and an 206\n                  inter-temporal elasticity of substitution of 1.5\n                </React.Fragment>\n              )}\n            </div>\n          </div>\n        </div>\n        {this.props.children &&\n          this.props.children({\n            state: this.props.params,\n          })}\n      </div>\n    );\n  }\n}\n","// @flow\n\nimport * as React from 'react';\n\nimport {geoNaturalEarth1, geoPath} from 'd3-geo';\nimport {feature} from 'topojson-client';\nimport map from './ne_110_topo_quant.json';\nimport {schemeRdYlBu} from 'd3-scale-chromatic';\nimport CSVLoader from './csv-loader';\nimport ParameterPicker from './param-picker';\nimport {RCPS, DMGS} from './constants';\n\nconst projection = geoNaturalEarth1()\n  .scale(100)\n  .translate([800 / 2, 275 / 2]);\nconst worldMap = feature(map, map.objects.countries).features;\n\ntype Props = {\n  data: Array<{}>,\n  ssp?: string,\n  rcp?: string,\n  dmg?: string,\n  onCountryEnter: (name: string, data: {}) => any,\n  country?: string,\n};\n\nclass Figure2 extends React.Component<Props> {\n  componentDidUpdate(prevProps) {\n    const country = worldMap.find(country => country.properties.id ===this.props.country)\n    const countryRow = this.props.data.find(row => row.ISO3 === this.props.country);\n    if (prevProps.data !== this.props.data || prevProps.country !== this.props.country) {\n      if (country && countryRow) {\n        const {label} = country.properties;\n        this.props.onCountryEnter(label, countryRow)\n      }\n    }\n  }\n  render() {\n    const {data} = this.props;\n\n    return (\n      <svg width={600} height={250} viewBox=\"150 0 600 250\">\n        <g transform={`translate(675, 0)`}>\n          ><Fig2Legend bins={fig2Bins} labels={{0: '<-10', 7: '>100'}} />\n        </g>\n        <g className=\"countries\">\n          {worldMap.map(country => {\n            // access feature metadata via country.properties\n            const {\n              properties: {label, id},\n            } = country;\n            const countryRow = data.find(row => row.ISO3 === id);\n\n            return (\n              <path\n                key={label}\n                label={label}\n                stroke=\"#ccc\"\n                d={geoPath().projection(projection)(country)}\n                fill={colorFor(countryRow)}\n                onMouseEnter={() =>\n                  this.props.onCountryEnter &&\n                  this.props.onCountryEnter(label, countryRow)\n                }\n                style={{cursor: 'pointer'}}\n                onClick={() => this.props.onCountryClick(id)}\n              />\n            );\n          })}\n        </g>\n      </svg>\n    );\n  }\n}\n\ntype CSVFig2Props = {\n  ssp: string,\n  rcp: string,\n  dmg: string,\n  csvPath?: string,\n};\ntype CSVFig2State = {\n  data: Array<{}>,\n  loading: boolean,\n};\n\nconst colorFor = row => {\n  if (row) {\n    const index = binner(row['50%'], true);\n    if (index > -1) {\n      return schemeRdYlBu[11][index + 0];\n    }\n  }\n  return '#eee';\n};\n\nconst fig2Bins = [\n  [-1000, -10],\n  [-10, -1],\n  [-1, 0],\n  [0, 1],\n  [1, 10],\n  [10, 50],\n  [50, 100],\n  [100, 100000],\n];\nconst binner = (val, invert = false, bins = fig2Bins) => {\n  const indices = bins.map(([min, max]) => val > min && val <= max);\n  const pos = indices.indexOf(true);\n  return invert ? bins.length - pos : pos;\n};\n\nconst Fig2Legend = ({bins, labels, size = 15, x, y}) => {\n  const height = (size + 1) * bins.length;\n  return bins.map((bin, idx) => {\n    return (\n      <React.Fragment key={bin[0]}>\n        <rect\n          fill={colorFor({'50%': (bin[0] + bin[1]) / 2})}\n          width={size}\n          height={size}\n          x={0}\n          y={idx * (size + 1)}\n        />\n        <text\n          className=\"f2-legend-label\"\n          x={size + 2}\n          y={idx * (size + 1) + 10}\n        >\n          {labels[idx] !== undefined ? labels[idx] : `${bin[0]} â ${bin[1]}`}\n        </text>\n      </React.Fragment>\n    );\n  });\n};\n\ntype ParamProps = {\n  onCountrySelect: (iso3: string) => any,\n  country?: string, // an iso3 country\n  params: *,\n};\ntype ParamState = {\n  ssp: 'SSP1' | 'SSP2' | 'SSP3' | 'SSP4' | 'SSP5',\n  rcp: 'rcp45' | 'rcp60' | 'rcp85',\n  dmg: 'bhm_sr' | 'bhm_richpoor_sr' | 'bhm_lr' | 'bhm_richpoor_lr' | 'djo',\n  hoveredName?: string,\n  hoveredData?: {},\n};\n\nexport class Fig2Options extends React.Component<ParamProps, ParamState> {\n  state = {\n    ssp: 'SSP2',\n    rcp: 'rcp60',\n    dmg: 'bhm_sr',\n  };\n  update = evt => {\n    this.setState({[evt.currentTarget.name]: evt.currentTarget.value});\n  };\n\n  static fixedDiscounting(row: {prtp: string}) {\n    return (\n      row.prtp !== '2' &&\n      row.dmgfuncpar === 'bootstrap' &&\n      row.climate === 'uncertain'\n    );\n  }\n\n  static growthAdjustedDiscounting(row: {prtp: string}) {\n    return (\n      row.prtp === '2' &&\n      row.dmgfuncpar === 'bootstrap' &&\n      row.climate === 'uncertain'\n    );\n  }\n\n  render() {\n    const {hoveredData} = this.state;\n\n    return (\n      <div className=\"f2\">\n        <ParameterPicker params={this.props.params} onChange={this.props.onParamChange}>\n          {({state: {rcp, ssp, dmg, discounting}}) => (\n            <CSVLoader\n              csvPath={`${\n                process.env.PUBLIC_URL\n              }/rcp_${rcp}_dmg_${dmg}_ssp_${ssp}.csv`}\n              test={\n                discounting === 'fixed'\n                  ? Fig2Options.fixedDiscounting\n                  : Fig2Options.growthAdjustedDiscounting\n              }\n            >\n              {({data, loading}) => (\n                <div\n                  className={`${\n                    loading ? 'loading-map' : undefined\n                  } f2-main-row`}\n                >\n                  <div>\n                    <Figure2\n                      country={this.props.country}\n                      data={data}\n                      onCountryEnter={this.hoverCountry}\n                      onCountryClick={this.props.onCountrySelect}\n                    />\n                    <p className=\"caption\">\n                      Spatial distribution of median estimates of the CSCC\n                      computed for the reference case of scenario {ssp}/{\n                        RCPS.find(x => x.value === rcp).label\n                      }, {DMGS.find(x => x.value === dmg).label} impact function\n                      ({dmg}), and a{' '}\n                      {discounting === 'fixed'\n                        ? 'fixed discount rate'\n                        : 'growth adjusted discount rate with 2% pure rate of time preference and IES of 1.5'}.\n                    </p>\n                  </div>\n                  <div className=\"f2-country-detail\">\n                    {this.state.hoveredName ? (\n                      <React.Fragment>\n                        <p\n                          className=\"f2-countryname\"\n                          style={{\n                            borderTop: `3px solid ${colorFor(hoveredData)}`,\n                            borderBottom: `3px solid ${colorFor(hoveredData)}`,\n                          }}\n                        >\n                          <strong>{this.state.hoveredName || ' '} </strong>\n                        </p>\n                        <p className=\"f2-country-scc-desc\">\n                          Social Cost of Carbon in in USD/tCO <sub>2</sub>\n                        </p>\n                        {this.state.hoveredData ? (\n                          <div className=\"f2-country-scc\">\n                            <div className=\"f2-pct-cell\">\n                              <div>\n                                {hoveredData && fmt(hoveredData['16.7%'])}\n                              </div>\n                              <div>16.3%</div>\n                            </div>\n\n                            <div className=\"f2-pct-cell\">\n                              <div>\n                                {hoveredData && fmt(hoveredData['50%'])}\n                              </div>\n                              <div>50%</div>\n                            </div>\n\n                            <div className=\"f2-pct-cell\">\n                              <div>\n                                {hoveredData && fmt(hoveredData['83.3%'])}\n                              </div>\n                              <div>83.3%</div>\n                            </div>\n                          </div>\n                        ) : (\n                          <p className=\"f2-nodata\">No data available</p>\n                        )}\n                      </React.Fragment>\n                    ) : null}\n                  </div>\n                </div>\n              )}\n            </CSVLoader>\n          )}\n        </ParameterPicker>\n      </div>\n    );\n  }\n  hoverCountry = (hoveredName: string, hoveredData: {}) => {\n    this.setState({\n      hoveredName,\n      hoveredData,\n    });\n  };\n}\n\nconst fmt = val => typeof val === 'number' && Math.trunc(val * 1000) / 1000;\n\nexport default Figure2;\n\n// rcp, ssp, dmdfn\n","// @flow\n\nimport * as React from 'react';\nimport {scaleLinear, scaleDiverging, scaleLog} from 'd3-scale';\nimport {interpolateRdBu, schemeRdBu} from 'd3-scale-chromatic';\nimport {Motion, spring} from 'react-motion';\nimport uniqueId from 'lodash/uniqueId';\nimport range from 'lodash/range';\n\nimport CSVLoader from './csv-loader.js';\n\nexport class Fig4DataLoader extends React.PureComponent<*, *> {\n  static defaultProps = {\n    ssp: 'SSP2',\n    rcp: 'rcp60',\n    dmg: 'bhm_sr',\n    discounting: 'growth adjusted',\n    countriesToPlot: [\n      'ARG',\n      'AUS',\n      'BRA',\n      'CAN',\n      'CHN',\n      'DEU',\n      'FRA',\n      'GBR',\n      'IDN',\n      'IND',\n      'ITA',\n      'JPN',\n      'KOR',\n      'MEX',\n      'RUS',\n      'SAU',\n      'TUR',\n      'USA',\n      'ZAF',\n    ],\n  };\n\n  static fixedDiscounting(row: {prtp: string}) {\n    return (\n      row.prtp !== '2' &&\n      row.dmgfuncpar === 'bootstrap' &&\n      row.climate === 'uncertain'\n    );\n  }\n\n  static growthAdjustedDiscounting(row: {prtp: string}) {\n    return (\n      row.prtp === '2' &&\n      row.dmgfuncpar === 'bootstrap' &&\n      row.climate === 'uncertain'\n    );\n  }\n\n  basicFilter(row: *) {\n    return (\n      row.prtp === '2' &&\n      row.dmgfuncpar === 'bootstrap' &&\n      row.climate === 'uncertain'\n    );\n  }\n\n  getEuData(csccData, wbData) {\n    const euCountries = [\n      'AUT',\n      'BEL',\n      'BGR',\n      'HRV',\n      'CYP',\n      'CZE',\n      'DNK',\n      'EST',\n      'FIN',\n      'FRA',\n      'DEU',\n      'GRC',\n      'HUN',\n      'IRL',\n      'ITA',\n      'LVA',\n      'LTU',\n      'LUX',\n      'MLT',\n      'NLD',\n      'POL',\n      'PRT',\n      'ROU',\n      'SVK',\n      'SVN',\n      'ESP',\n      'SWE',\n      'GBR',\n    ];\n    const worldCsccData = csccData.find(r => r.ISO3 === 'WLD');\n    // const worldData = wbData.find(r => r['Country Code'] === 'WLD');\n\n    if (!worldCsccData) {\n      return;\n    }\n\n    const wbEu = wbData.filter(r => euCountries.includes(r['Country Code']));\n    const csccEu = csccData.filter(r => euCountries.includes(r.ISO3));\n\n    const euCo2eShare = wbEu.reduce(\n      (acc, curr) => acc + curr['Emissions Share'],\n      0,\n    );\n    const euPop = wbEu.reduce((acc, curr) => acc + curr['2017 Population'], 0);\n    const euGdp = wbEu.reduce((acc, curr) => acc + curr['2017 GDP'], 0);\n    const euSccLow = csccEu.reduce((acc, curr) => acc + curr['16.7%'], 0);\n    const euSccMid = csccEu.reduce((acc, curr) => acc + curr['50%'], 0);\n    const euSccHigh = csccEu.reduce((acc, curr) => acc + curr['83.3%'], 0);\n    const euSccPerCapita = 1000000 * euSccMid / euPop;\n    const euLogGdp = Math.log10(euGdp);\n    return {\n      sccPerCapita: euSccPerCapita,\n      logGdp: euLogGdp,\n      gdp: euGdp,\n      shareEmissions: 100 * euCo2eShare,\n      shareScc: 100 * euSccMid / worldCsccData['50%'],\n      ISO3: 'EUC',\n      label: 'EU',\n      population: euPop,\n      '50%': euSccMid,\n      '16.7%': euSccLow,\n      '83.3%': euSccHigh,\n    };\n  }\n\n  getAllData(csccData, wbData) {\n    const worldCsccData = csccData.find(r => r.ISO3 === 'WLD');\n    const totalCscc = worldCsccData ? worldCsccData['50%'] : 1;\n\n    return csccData\n      .map(row => {\n        const worldBankData = wbData.find(r => r['Country Code'] === row.ISO3);\n        if (worldBankData) {\n          // Country Name,Country Code,2017 GDP,2017 Population,2014 Emissions,Emissions Share\n          return {\n            sccPerCapita: worldBankData['2017 Population']\n              ? 1000000 * row['50%'] / worldBankData['2017 Population']\n              : 0,\n            logGdp:\n              worldBankData['2017 GDP'] > 0\n                ? Math.log10(worldBankData['2017 GDP'])\n                : 0,\n            gdp: worldBankData['2017 GDP'],\n            shareEmissions: 100 * worldBankData['Emissions Share'],\n            shareScc: 100 * row['50%'] / totalCscc,\n            ISO3: row.ISO3, // extras:\n            label: worldBankData['Country Name'],\n            '50%': row['50%'],\n            '16.7%': row['16.7%'],\n            '83.3%': row['83.3%'],\n          };\n        } else {\n          debugger;\n          return {\n            sccPerCapita: 0,\n            logGdp: 0,\n            gdp: 0,\n            shareEmissions: 0,\n            shareScc: 0,\n            ISO3: row.ISO3, // extras:\n            label: '',\n            '50%': 0,\n          };\n        }\n      })\n      .filter(row => this.props.countriesToPlot.includes(row.ISO3));\n  }\n\n  dataToRender(csccData, wbData) {\n    const euData = this.getEuData(csccData, wbData);\n    const allData = this.getAllData(csccData, wbData);\n    return euData ? [...allData, euData] : allData;\n  }\n\n  state = {\n    csccData: [],\n    csccLoading: true,\n    wbData: [],\n    wbLoading: true,\n  };\n\n  getData = () => {\n    return this.dataToRender(this.state.csccData, this.state.wbData);\n  };\n\n  dataForIso3 = (iso3 = '') => iso3.trim() ? this.getData().find(row => row.ISO3 === iso3) : undefined;\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.state.csccData !== prevState.csccData || this.state.wbData !== prevState.wbData) {\n      this.props.onChange && this.props.onChange({data: this.getData(), countryData: this.dataForIso3(this.props.iso3)});\n    }\n  }\n\n  render() {\n    const {dmg, rcp, ssp} = this.props;\n    const csvPath = `rcp_${rcp}_dmg_${dmg}_ssp_${ssp}.csv`;\n    const test =\n      this.props.discounting === 'fixed'\n        ? Fig4DataLoader.fixedDiscounting\n        : Fig4DataLoader.growthAdjustedDiscounting;\n\n    const data = this.getData();\n\n    return (\n      <React.Fragment>\n        <CSVLoader\n          test={test}\n          csvPath={`${process.env.PUBLIC_URL || ''}/${csvPath}`}\n          onChange={({data, loading}) =>\n            this.setState({csccData: data, csccLoading: loading})\n          }\n        />\n        <CSVLoader\n          dynamicTyping={col => !col.includes('Country')}\n          csvPath={`${process.env.PUBLIC_URL || ''}/gdp_pop_co2e.csv`}\n          onChange={({data, loading}) =>\n            this.setState({wbData: data, wbLoading: loading})\n          }\n        />\n        {this.props.children({data})}\n      </React.Fragment>\n    );\n  }\n}\n\nexport class CsccFig4 extends React.Component<*, *> {\n  static defaultProps = {\n    width: 400,\n    height: 300,\n    data: [],\n    domainX: [-1, 32],\n    domainY: [-6, 23],\n    xAxis: [0, 10, 20, 30],\n    yAxis: [-30, -25, -20, -15, -10, -5, 0, 5, 10, 15, 20, 25, 30, 35],\n    labelCountries: [\n      'USA',\n      'CHN',\n      'IND',\n      'EUC',\n      'RUS',\n      'MEX',\n      'SAU',\n      'BRA',\n      'CAN',\n      'JPN',\n    ],\n    clip: false,\n    padding: {x: 20, y: 10},\n  };\n\n  render() {\n    const {\n      data,\n      width,\n      height,\n      domainX,\n      domainY: initialDomainY,\n      padding,\n    } = this.props;\n    const gdps = data.map(r => r.gdp);\n    const gdpDomain =\n      gdps.length > 0 ? [Math.min(...gdps), Math.max(...gdps)] : [5.3, 14];\n\n    const scaleR = scaleLog()\n      .domain(gdpDomain)\n      .range([1, 30]);\n\n    // both input domain and ranges are specified as in paper\n    const scaleX = scaleLinear()\n      .domain(domainX)\n      .range([padding.x, width - 1]);\n\n    const shareSccs = data.length > 0 ? data.map(r => r.shareScc) : [-5, 25];\n    // y axis is shareScc\n    // width is logGdp\n    // const maxGdp = gdps.length > 0 ? Math.log10(Math.max(...gdps)) : 0;\n    const maxGdp = 4;\n    const domainY =\n      width > 399\n        ? [Math.min(...shareSccs) - maxGdp, Math.max(...shareSccs) + maxGdp]\n        : initialDomainY;\n    const scaleY = scaleLinear() // invert axes\n      .domain(domainY)\n      .range([height - padding.y, 1]);\n\n    const color = scaleDiverging(interpolateRdBu)\n      // .domain([-0.15, 0, 0.23])\n      .domain([-0.5, 0, 0.25])\n      .clamp(true);\n\n    const safe = val => {\n      if (Number.isNaN(val) || val == null) {\n        return 0;\n      } else {\n        return val;\n      }\n    };\n\n    return (\n      <svg\n        width={width}\n        height={height}\n        viewBox={`0 0 ${width} ${height}`}\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <Fig4Axes\n          domainX={domainX}\n          domainY={domainY}\n          scaleX={scaleX.clamp(true)}\n          scaleY={scaleY.clamp(true)}\n          xAxis={this.props.xAxis}\n          yAxis={this.props.yAxis}\n          padding={padding}\n        />\n        {data\n          .filter(row => {\n            // could use this to clip data if clip prop specified\n            return this.props.clip\n              ? row.shareEmissions <= domainX[1] && row.shareScc <= domainY[1]\n              : true;\n          })\n          .map(row => {\n            const shareEmissions = safe(row.shareEmissions);\n            const shareScc = safe(row.shareScc);\n            const gdp = safe(row.gdp);\n            const gdpRadius = safe(scaleR(gdp));\n            const sccPerCapita = safe(row.sccPerCapita);\n            return (\n              <Motion\n                key={`${row.ISO3}`}\n                defaultStyle={{\n                  x: scaleX(shareEmissions),\n                  y: scaleY(shareScc),\n                  r: gdpRadius / 2,\n                  capita: sccPerCapita,\n                  textY: scaleY(shareScc) + gdpRadius * 2.1,\n                }}\n                style={{\n                  x: spring(scaleX(shareEmissions)),\n                  y: spring(scaleY(shareScc)),\n                  capita: spring(sccPerCapita),\n                  r: spring(gdpRadius / 2),\n                  textY: spring(scaleY(shareScc) + gdpRadius * 2.1),\n                }}\n              >\n                {values => (\n                  <React.Fragment key={row.ISO3}>\n                    <circle\n                      title={`${row.label}: ${values.capita}== ${color(\n                        values.capita,\n                      )}`}\n                      key={row.ISO3}\n                      cx={safe(values.x)}\n                      cy={safe(values.y)}\n                      fill={color(safe(-1 * values.capita))}\n                      className=\"fig4-circle\"\n                      r={safe(values.r)}\n                      strokeWidth={1}\n                      stroke=\"#444\"\n                      onClick={() => {\n                        this.props.onCountrySelect &&\n                          this.props.onCountrySelect({\n                            ...row,\n                            color: color(safe(-1 * sccPerCapita)),\n                            radius: safe(gdpRadius / 2),\n                          });\n                      }}\n                    />\n                    {this.props.labelCountries.includes(row.ISO3) && (\n                      <text\n                        style={{fontSize: 12, pointerEvents: 'none'}}\n                        x={scaleX(safe(row.shareEmissions))}\n                        y={safe(values.y) + safe(scaleR(safe(row.gdp))) * 0.85}\n                      >\n                        {row.label}\n                      </text>\n                    )}\n                  </React.Fragment>\n                )}\n              </Motion>\n            );\n          })}\n      </svg>\n    );\n  }\n}\n\nconst Fig4Axes = ({\n  xAxis,\n  yAxis,\n  domainX,\n  domainY,\n  scaleX,\n  scaleY,\n  padding,\n}) => {\n  return (\n    <g>\n      <rect\n        x={scaleX(domainX[0])}\n        y={scaleY(domainY[1])}\n        width={scaleX(domainX[1] - domainX[0])}\n        height={scaleY(domainY[0]) - scaleY(domainY[1])}\n        fill=\"transparent\"\n        stroke=\"#ccc\"\n        strokeWidth={1}\n      />\n      {xAxis.map(x => (\n        <React.Fragment key={`xAxisAt${x}`}>\n          <line\n            x1={scaleX(x)}\n            x2={scaleX(x)}\n            y1={scaleY(45)}\n            y2={scaleY(-40) + 2}\n            stroke=\"#ddd\"\n            strokeWidth={1}\n          />\n          <text\n            x={scaleX(x)}\n            y={scaleY(-40) + 10}\n            fontSize={10}\n            color=\"#666\"\n            textAnchor=\"middle\"\n          >\n            {x}\n          </text>\n        </React.Fragment>\n      ))}\n      {yAxis.filter(y => y >= domainY[0] && y <= domainY[1]).map(y => (\n        <Motion\n          key={`xAxisAt${y}`}\n          defaultStyle={{y: scaleY(y) || 0}}\n          style={{y: spring(scaleY(y))}}\n        >\n          {values => (\n            <React.Fragment>\n              <line\n                x1={scaleX(-20) - 4}\n                x2={scaleX(40)}\n                y1={values.y}\n                y2={values.y}\n                stroke=\"#ddd\"\n                strokeWidth={1}\n              />\n              <text\n                x={scaleX(0) - 16}\n                y={values.y + 2}\n                fontSize={10}\n                color=\"#666\"\n                textAnchor=\"end\"\n              >\n                {y}\n              </text>\n            </React.Fragment>\n          )}\n        </Motion>\n      ))}\n      <SlopeLines\n        domainX={domainX}\n        domainY={domainY}\n        scaleX={scaleX}\n        scaleY={scaleY}\n        slopes={[\n          [4, 1],\n          [2, 1],\n          [1, 1],\n          [1, 2],\n          [1, 4],\n          [1, -4],\n          [1, -2],\n          [1, -1],\n          [2, -1],\n        ]}\n      />\n    </g>\n  );\n};\n\nconst SlopeLines = ({scaleX, scaleY, domainX, domainY, slopes}) => (\n  <React.Fragment>\n    {slopes.map(([y, x]) => {\n      const m = y / x;\n      const yInt = x > 0 ? (x === 1 ? domainY[1] : m * domainX[1]) : domainY[0];\n      const xInt = x === 2 || x === 4 ? domainX[1] : yInt / m;\n      return (\n        <line\n          key={`${x}:${y}`}\n          id={`${x}:${y}`}\n          x1={scaleX(0)}\n          y1={scaleY(0)}\n          x2={scaleX(xInt)}\n          y2={scaleY(yInt)}\n          strokeWidth={1}\n          stroke={x === y ? '#aaa' : '#eee'}\n        />\n      );\n    })}\n  </React.Fragment>\n);\n\nexport class Fig4Legend extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      gradientId: uniqueId('gradient'),\n    };\n  }\n  render() {\n    const colorInterpolate = scaleDiverging(interpolateRdBu)\n      .domain([-0.5, 0, 0.25])\n      .clamp(true);\n\n    const width = 0.75 / 10;\n\n    const scaleY = scaleLinear()\n      .domain([-0.25, 0.5])\n      .range([80, 0])\n      .clamp(true);\n\n    const scaleR = scaleLog()\n      .domain([5.3, 14])\n      .range([1, 30]);\n\n    return (\n      <svg>\n        <defs>\n          <linearGradient\n            id={this.state.gradientId}\n            gradientTransform=\"rotate(90)\"\n          >\n            {range(11).map(idx => (\n              <stop\n                key={idx}\n                offset={`${idx * 10}%`}\n                stopColor={colorInterpolate(idx * width - 0.5)}\n              />\n            ))}\n          </linearGradient>\n        </defs>\n        <text x={90} y={20} fontSize={10}>\n          SCC Per Capita (US$/MtCO2/person)\n        </text>\n        <g transform=\"translate(25 10)\">\n          <rect\n            width={30}\n            height={80}\n            fill={`url(#${this.state.gradientId})`}\n            x={0}\n            y={0}\n          />\n          <text y={scaleY(0) + 3} x={35} fontSize={10}>\n            0\n          </text>\n          <line\n            x1={0}\n            x2={5}\n            y1={scaleY(0)}\n            y2={scaleY(0)}\n            strokeWidth={1}\n            stroke=\"#666\"\n          />\n          <line\n            x1={25}\n            x2={30}\n            y1={scaleY(0)}\n            y2={scaleY(0)}\n            strokeWidth={1}\n            stroke=\"#666\"\n          />\n          <line\n            x1={0}\n            x2={5}\n            y1={scaleY(0.5 - width / 2)}\n            y2={scaleY(0.5 - width / 2)}\n            strokeWidth={1}\n            stroke=\"#fff\"\n          />\n          <line\n            x1={25}\n            x2={30}\n            y1={scaleY(0.5 - width / 2)}\n            y2={scaleY(0.5 - width / 2)}\n            strokeWidth={1}\n            stroke=\"#fff\"\n          />\n\n          <line\n            x1={0}\n            x2={5}\n            y1={scaleY(-0.25 + width / 2)}\n            y2={scaleY(-0.25 + width / 2)}\n            strokeWidth={1}\n            stroke=\"#fff\"\n          />\n          <line\n            x1={25}\n            x2={30}\n            y1={scaleY(-0.25 + width / 2)}\n            y2={scaleY(-0.25 + width / 2)}\n            strokeWidth={1}\n            stroke=\"#fff\"\n          />\n          <text y={scaleY(0.5 - width / 2) + 3} x={35} fontSize={10}>\n            0.5\n          </text>\n          <text y={scaleY(-0.25 + width / 2) + 3} x={35} fontSize={10}>\n            -0.25\n          </text>\n        </g>\n        <g transform=\"translate(90 100)\">\n          <text x={0} y={10} fontSize={10}>\n            Log(GDP(US$))\n          </text>\n          <circle\n            r={scaleR(7)}\n            cx={10}\n            cy={30}\n            strokeWidth={1}\n            stroke=\"#666\"\n            fill=\"transparent\"\n          />\n          <text fontSize={10} x={10} y={33} textAnchor=\"middle\">\n            7\n          </text>\n          <circle\n            r={scaleR(8)}\n            cx={40}\n            cy={30}\n            strokeWidth={1}\n            stroke=\"#666\"\n            fill=\"transparent\"\n          />\n          <text fontSize={10} x={40} y={33} textAnchor=\"middle\">\n            8\n          </text>\n          <circle\n            r={scaleR(9)}\n            cx={80}\n            cy={30}\n            strokeWidth={1}\n            stroke=\"#666\"\n            fill=\"transparent\"\n          />\n          <text fontSize={10} x={80} y={33} textAnchor=\"middle\">\n            9\n          </text>\n        </g>\n      </svg>\n    );\n  }\n}\n\nexport const SccTable = ({row}) => {\n  const fmt = val => (typeof val === 'number' ? val.toPrecision(5) : null);\n\n  return (\n    <React.Fragment>\n      <p className=\"f2-country-scc-desc\">\n        Social Cost of Carbon in in USD/tCO <sub>2</sub>\n      </p>\n      {row ? (\n        <div className=\"f2-country-scc\">\n          <div className=\"f2-pct-cell\">\n            <div>{row && fmt(row['16.7%'])}</div>\n            <div>16.3%</div>\n          </div>\n\n          <div className=\"f2-pct-cell\">\n            <div>{row && fmt(row['50%'])}</div>\n            <div>50%</div>\n          </div>\n\n          <div className=\"f2-pct-cell\">\n            <div>{row && fmt(row['83.3%'])}</div>\n            <div>83.3%</div>\n          </div>\n        </div>\n      ) : (\n        <p className=\"f2-nodata\">No data available</p>\n      )}\n    </React.Fragment>\n  );\n};\n","// @flow\nimport React, {Component} from 'react';\nimport ReactDOMServer from 'react-dom/server';\n\nimport {Fig1Options} from './SccFig1';\nimport {Fig2Options} from './SccFig2';\nimport {Fig4DataLoader, CsccFig4, Fig4Legend, SccTable} from './SccFig4.js';\nimport {RCPS, DMGS, SSPS} from './constants';\nimport ParameterPicker from './param-picker';\nimport {saveAs} from 'file-saver';\n\nimport './App.css';\n\nclass App extends Component {\n  state = {\n    selectedCountry: 'WLD',\n    page: '/winners',\n    params: {\n      ssp: 'SSP2',\n      rcp: 'rcp60',\n      dmg: 'bhm_sr',\n      discounting: 'growth adjusted',\n    },\n  };\n\n  queryParse(query = '') {\n    return query\n      .split('&')\n      .map(pair => pair.split('='))\n      .map(kv => kv.map(decodeURIComponent))\n      .reduce((acc, curr) => {\n        acc[curr[0]] = curr[1];\n        return acc;\n      }, {});\n  }\n\n  queryEncode(obj = {}) {\n    return Object.keys(obj)\n      .map(key => [key, obj[key]])\n      .filter(kv => kv[1] !== undefined)\n      .map(kv => kv.map(encodeURIComponent))\n      .map(kv => kv.join('='))\n      .join('&');\n  }\n\n  hashParse(hash) {\n    if (hash.startsWith('#')) {\n      const [path, query] = hash.substring(1).split('?');\n      return {path, query: this.queryParse(query)};\n    }\n    return {path: '', query: {}};\n  }\n\n  handleHashChange = evt => {\n    const {path, query} = this.hashParse(window.location.hash);\n\n    // handle page change\n    if (['/winners', '/cscc'].includes(path)) {\n      if (this.state.page !== path) {\n        this.setState({page: path});\n      }\n    }\n  };\n\n  nav = (pathStr, queryObj) => {\n    // navigate to hash-path with queryObj and merge query object\n    // same goes for path.\n    const currentQuery = this.hashParse(window.location.hash).query;\n    const query =\n      queryObj == null ? currentQuery : {...currentQuery, ...queryObj};\n    const querystring = this.queryEncode(query);\n    const path =\n      pathStr == null ? this.hashParse(window.location.hash).path : pathStr;\n\n    window.location.hash = `${path}${\n      querystring.length > 0 ? `?${querystring}` : ''\n    }`;\n\n    this.updateNavState(path, query);\n  };\n\n  updateNavState = (pathStr, queryObj) => {\n    this.setState({\n      page: pathStr,\n      params: {\n        ssp: queryObj.ssp,\n        rcp: queryObj.rcp,\n        dmg: queryObj.dmg,\n        discounting: queryObj.discounting,\n      },\n      iso3: queryObj.iso3,\n    });\n  };\n\n  componentDidMount() {\n    const {path, query} = this.hashParse(window.location.hash);\n    window.addEventListener('hashchange', this.handleHashChange);\n    if (path === '') {\n      this.nav(this.state.page, {...this.state.params, ...query});\n    } else {\n      this.updateNavState(path, query);\n    }\n  }\n\n  render() {\n    const {page} = this.state;\n    return (\n      <div className=\"App\">\n        <h1>Country-Level Social Cost of Carbon</h1>\n\n        <div className=\"top-nav\">\n          <button\n            className={page === '/winners' ? 'activeNavButton' : undefined}\n            onClick={() => this.nav('/winners')}\n          >\n            âWinnersâ &amp; âLosersâ among G20 nations.\n          </button>\n          <button\n            className={page === '/cscc' ? 'activeNavButton' : undefined}\n            onClick={() => this.nav('/cscc')}\n          >\n            Country-level social cost of carbon\n          </button>\n        </div>\n\n        {page === '/winners' && (\n          <div>\n            <ParameterPicker\n              onChange={({state}) => {\n                this.nav(null, state);\n              }}\n              params={this.state.params}\n            >\n              {({state}) => (\n                <React.Fragment>\n                  <div\n                    style={{\n                      display: 'flex',\n                      flex: '1',\n                      width: 800,\n                      position: 'relative',\n                      marginBottom: 40,\n                    }}\n                  >\n                    <Fig4DataLoader\n                      {...state}\n                      ref={el => (this.bigFig4 = el)}\n                      iso3={this.state.iso3}\n                      onChange={({countryData}) => {\n                        console.log({countryData});\n                        this.state.iso3 &&\n                          this.setState({fig4Data: countryData});\n                      }}\n                    >\n                      {({data}) => (\n                        <React.Fragment>\n                          <CsccFig4\n                            data={data}\n                            onCountrySelect={\n                              fig4Data => {\n                                this.nav(null, {iso3: fig4Data.ISO3});\n                                this.setState({fig4Data});\n                              }\n                              // this.setState({fig4Data})\n                            }\n                          />\n                          <div style={{marginRight: 40}} />\n                          <CsccFig4\n                            width={150}\n                            height={300}\n                            xAxis={[0, 1, 2, 3, 4]}\n                            yAxis={[-2, 0, 2, 4, 6]}\n                            domainX={[-0.2, 4.2]}\n                            domainY={[-2.5, 6.2]}\n                            clip={true}\n                            data={data}\n                            onCountrySelect={fig4Data => {\n                              this.nav(null, {iso3: fig4Data.ISO3});\n                              this.setState({fig4Data});\n                            }}\n                          />\n                          <div style={{display: 'flex', flexFlow: 'column'}}>\n                            <Fig4Legend />\n                            {this.state.fig4Data && (\n                              <div\n                                style={{\n                                  marginTop: 12,\n                                  display: 'flex',\n                                  flexFlow: 'column',\n                                }}\n                              >\n                                <div\n                                  style={{\n                                    marginLeft: 30,\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    borderTop: '1px solid #999',\n                                  }}\n                                >\n                                  <svg\n                                    width={35}\n                                    height={35}\n                                    viewBox=\"0 0 35 35\"\n                                  >\n                                    <circle\n                                      cx={17.5}\n                                      cy={17.5}\n                                      r={this.state.fig4Data.radius}\n                                      fill={this.state.fig4Data.color}\n                                      strokeWidth={1}\n                                      stroke=\"#666\"\n                                    />\n                                  </svg>\n                                  <p>{this.state.fig4Data.label}</p>\n                                </div>\n                                <div className=\"fig4-detail\">\n                                  <SccTable row={this.state.fig4Data} />\n                                  <p>\n                                    SCC Per Capita: ${this.state.fig4Data.sccPerCapita.toFixed(\n                                      3,\n                                    )}\n                                  </p>\n                                  <p>\n                                    SCC Share:{' '}\n                                    {this.state.fig4Data.shareScc.toFixed(1)}%\n                                  </p>\n                                  <p>\n                                    Emissions Share:{' '}\n                                    {this.state.fig4Data.shareEmissions.toFixed(\n                                      1,\n                                    )}%\n                                  </p>\n                                </div>\n                              </div>\n                            )}\n                          </div>\n                        </React.Fragment>\n                      )}\n                    </Fig4DataLoader>\n                    <p className=\"fig4-x-axis-label\">\n                      Share of global emissions 2014 (%)\n                    </p>\n                    <p className=\"fig4-y-axis-label\">\n                      Share of global social cost of carbon (%)\n                    </p>\n                  </div>\n                  {false && (\n                    <button\n                      onClick={() => {\n                        if (this.bigFig4) {\n                          const css = `\n                          text {\n                            font-family: helvetica;\n                          }\n                      `;\n                          const cdataWrapper = () => ({\n                            __html: `/* <![CDATA[ */ ${css} /* ]]> */`,\n                          });\n\n                          const Fig = () => (\n                            <svg xmlns=\"http://www.w3.org/2000/svg\">\n                              <style dangerouslySetInnerHTML={cdataWrapper()} />\n                              <CsccFig4 data={data} />\n                            </svg>\n                          );\n                          const data = this.bigFig4.getData();\n                          const svgText = ReactDOMServer.renderToStaticMarkup(\n                            <Fig />,\n                          );\n                          const blob = new Blob(\n                            [\n                              `<?xml version=\"1.0\" encoding=\"UTF-8\" ?>${svgText}`,\n                            ],\n                            {type: 'image/svg+xml;charset=utf-8'},\n                          );\n                          saveAs(blob, 'figure4-ricke-et-al.svg');\n                        }\n                      }}\n                    >\n                      download figure\n                    </button>\n                  )}\n                  <p className=\"caption\">\n                    Country-level shares of global SSC (i.e., CSCC/GSCC) versus\n                    shares of 2013 CO2 emissions. CSCC is the median estimate\n                    with growth adjusted discounting for {state.ssp}/{\n                      RCPS.find(x => x.value === state.rcp).label\n                    }, {DMGS.find(x => x.value === state.dmg).label} reference\n                    specification (pooled countries). Bubble size corresponds to\n                    the countryâs GDP (log(USD)) and the color indicates\n                    per-capita CSCC ($/MtCO2/person). Diagonal lines show the\n                    ratio of global SCC share to emissions share. Ratios greater\n                    than 1:1 indicate that a countryâs share of global SSC\n                    exceeds it share of global emission. Grey box in left panel\n                    indicates the bounds of the detail shown in right panel.\n                  </p>\n                </React.Fragment>\n              )}\n            </ParameterPicker>\n          </div>\n        )}\n\n        {page === '/cscc' && (\n          <React.Fragment>\n            <Fig2Options\n              country={this.state.iso3}\n              onCountrySelect={iso3 => {\n                this.nav(null, {iso3: iso3});\n              }}\n              params={this.state.params}\n              onParamChange={({state}) => {\n                this.nav(null, state);\n              }}\n            />\n            <Fig1Options\n              country={this.state.iso3}\n              params={this.state.params}\n              onCountryChange={selectedCountry => {\n                this.setState({selectedCountry});\n                this.nav(null, {iso3: selectedCountry});\n              }}\n              width={800}\n              height={540}\n              paddingY={20}\n            />\n          </React.Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}